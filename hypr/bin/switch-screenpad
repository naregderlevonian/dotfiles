#!/bin/sh

STATUS=$(echo "$(hyprctl -j monitors)" | jq '.[] | select(.name == "DP-1").disabled')
STORAGE=$HOME/.config/hypr/etc/screenpad.conf

if [ "$STATUS" == "false" ]; then
    MESSAGE="monitor = DP-1, disable"
    pkill waybar
else
    MESSAGE="monitor = DP-1, 2880x864@120, 0x1200, 1.5, bitdepth, 10"
fi

echo "$MESSAGE" > $STORAGE
sed -i '90,$ {/"output": \["DP-1"\]/ {s/DP-1/eDP-2/; b}; /"output": \["eDP-1"\]/ {s/eDP-1/DP-1/}}' $HOME/.config/waybar/config
notify-send "Screenpad $(if [ "$STATUS" == "false" ]; then echo "Off"; else echo "On"; fi)"
